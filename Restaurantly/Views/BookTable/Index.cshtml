<section id="hero" class="hero section dark-background">

    <img src="~/img/tableb.jpg" alt="" data-aos="fade-in">

    <div class="container">
        <div class="row">
            <div class="col-lg-8 d-flex flex-column align-items-center align-items-lg-start">
                <h2 data-aos="fade-up" data-aos-delay="100">Welcome to <span>Restaurantly</span></h2>
                <p data-aos="fade-up" data-aos-delay="200">Instructions for booking a table and choosing dishes</p>
                <div class="d-flex mt-4" data-aos="fade-up" data-aos-delay="300">
                    <a href="/" class="cta-btn">Instructions  <i class="fas fa-arrow-right" style="margin-left: 20px; cursor:pointer"></i></a>
                </div>
            </div>
            <div class="col-lg-4 d-flex align-items-center justify-content-center mt-5 mt-lg-0">
                <a href="https://www.youtube.com/watch?v=Y7f98aduVJ8" class="glightbox pulsating-play-btn"></a>
            </div>
        </div>
    </div>

</section>
<section id="book-a-table" class="book-a-table section">
    <div class="container section-title" data-aos="fade-up">
        <h2>RESERVATION</h2>
        <p id="status-message">Please select a table</p> <!-- Initial message -->
    </div>

    <div class="container" data-aos="fade-up" data-aos-delay="100">
        <!-- Step 1: Table Selection -->
        <div id="step-1">
            <div class="table-map">
                <div class="row mb-2">
                    <div class="col">
                        <button class="btn btn-outline-secondary available" data-table="A1">A1</button>
                    </div>
                    <div class="col">
                        <button class="btn btn-outline-secondary available" data-table="A2">A2</button>
                    </div>
                    <div class="col">
                        <button class="btn btn-outline-secondary available" data-table="A3">A3</button>
                    </div>
                    <div class="col">
                        <button class="btn btn-outline-secondary available" data-table="A4">A4</button>
                    </div>
                </div>
            </div>
            <h5 class="mt-3">Selected Table: <span id="selected-table">None</span></h5>
            <button class="btn btn-primary" id="continue-to-menu">Continue to Menu</button>
        </div>

        <!-- Step 2: Menu Selection (hidden initially) -->
        <div id="step-2" style="display: none;">
            <div class="form-group">
                <label for="menu-selection">Menu:</label>
                <select id="menu-selection" class="form-control">
                    <option value="menu1">Menu 1 - $20</option>
                    <option value="menu2">Menu 2 - $25</option>
                    <option value="menu3">Menu 3 - $30</option>
                </select>
            </div>
            <button class="btn btn-primary" id="continue-to-details">Continue to Details</button>
        </div>

        <!-- Step 3: Customer Details and Confirmation Form (hidden initially) -->
        <div id="step-3" style="display: none;">
            <form action="~/forms/book-a-table.php" method="post" role="form" class="php-email-form">
                <input type="hidden" name="table" id="final-table">
                <input type="hidden" name="menu" id="final-menu">

                <div class="row gy-4">
                    <div class="col-lg-4 col-md-6">
                        <input type="text" name="name" class="form-control" id="name" placeholder="Your Name" required="">
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <input type="email" class="form-control" name="email" id="email" placeholder="Your Email" required="">
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <input type="text" class="form-control" name="phone" id="phone" placeholder="Your Phone" required="">
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <input type="date" name="date" class="form-control" id="date" placeholder="Date" required="">
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <input type="time" class="form-control" name="time" id="time" placeholder="Time" required="">
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <input type="number" class="form-control" name="people" id="people" placeholder="# of people" required="">
                    </div>
                </div>

                <div class="form-group mt-3">
                    <textarea class="form-control" name="message" rows="5" placeholder="Message"></textarea>
                </div>

                <div class="text-center mt-3">
                    <div class="loading">Loading</div>
                    <div class="error-message"></div>
                    <div class="sent-message">Your booking request was sent. We will call back or send an Email to confirm your reservation. Thank you!</div>
                    <button type="submit">Confirm & Book</button>
                </div>
            </form>
        </div>
    </div>
</section>
<style>
    .btn-selected {
        border: 1px solid lightyellow;
        background-color: #f8f9fa;
    }</style>

<script>
    // Step 1: Table Selection
    document.querySelectorAll('.available').forEach(function (button) {
        button.addEventListener('click', function () {
            // Remove the 'btn-selected' class from previously selected table
            const previouslySelected = document.querySelector('.btn-selected');
            if (previouslySelected) {
                previouslySelected.classList.remove('btn-selected');
            }

            // Add 'btn-selected' to the clicked table
            this.classList.add('btn-selected');

            // Get selected table name
            const selectedTable = this.getAttribute('data-table');

            // Update the selected table text
            document.getElementById('selected-table').innerText = selectedTable;

            // Update the status message to reflect the table selection
            const statusMessage = document.getElementById('status-message');
            if (selectedTable) {
                statusMessage.innerText = `You have selected table ${selectedTable}`;
            }
        });
    });

    // Step 2: Proceed to Menu Selection
    document.getElementById('continue-to-menu').addEventListener('click', function () {
        const selectedTable = document.getElementById('selected-table').innerText;
        if (selectedTable === "None") {
            alert("Please select a table.");
        } else {
            // Hide the current step and show the menu selection
            document.getElementById('step-1').style.display = "none";
            document.getElementById('step-2').style.display = "block";

            // Update the status message
            document.getElementById('status-message').innerText = "Please select a menu.";
        }
    });

    // Step 3: Proceed to Customer Details
    document.getElementById('continue-to-details').addEventListener('click', function () {
        const selectedMenu = document.getElementById('menu-selection').value;
        document.getElementById('step-2').style.display = "none";
        document.getElementById('step-3').style.display = "block";

        // Update the status message
        document.getElementById('status-message').innerText = "Please fill in your details to confirm the booking.";
    });

</script>